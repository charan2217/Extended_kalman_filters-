

# ğŸš— Vehicle Sensor Fusion using Extended Kalman Filter (EKF)

This project implements a **2D Extended Kalman Filter (EKF)** for real-time **vehicle localization** using data from:

* ğŸ›°ï¸ Noisy **GPS** (`gps_x`, `gps_y`)
* ğŸ“¡ **IMU** acceleration (`imu_ax`, `imu_ay`)
* Optional ğŸ“ **Yaw rate** & heading tracking

It includes animated path estimation using OpenCV and Matplotlib and can easily be extended for full-stack autonomous navigation.

---

## ğŸ—‚ï¸ Project Structure

```bash
.
â”œâ”€â”€ ekf_upgrade.py                  # EKF with heading and yaw rate (6D state)
â”œâ”€â”€ main.py                         # Simple Kalman Filter run file
â”œâ”€â”€ simulation.py                   # Simulated data EKF processing
â”œâ”€â”€ sensor_data.csv                 # Basic sensor fusion dataset
â”œâ”€â”€ vehicle_sensor_fusion_dataset.csv # Realistic GPS + IMU dataset
â”œâ”€â”€ ekf_path_simulation.avi        # Generated EKF path animation video
â”œâ”€â”€ frame.jpg                       # Temporary frame used in animation
â””â”€â”€ README.md                       # (You're here!)
```

---

## ğŸ“Œ EKF State Definition

The system tracks a 6D state vector:

```python
x = [pos_x, pos_y, vel_x, vel_y, heading, yaw_rate]
```

### Inputs:

* `u = [acc_x, acc_y]` â†’ from IMU
* `z = [gps_x, gps_y]` â†’ from GPS

### Prediction (Physics-based motion model):

```python
x = F @ x + B @ u
P = F @ P @ F.T + Q
```

### Correction (Sensor fusion update):

```python
K = P @ H.T @ inv(H @ P @ H.T + R)
x = x + K @ (z - H @ x)
P = (I - K @ H) @ P
```

---

## ğŸ¥ EKF Path Visualization

The file `ekf_path_simulation.avi` is generated by:

* Plotting GPS and estimated paths frame-by-frame
* Capturing each frame as an image
* Combining all frames into a video using OpenCV

### ğŸ”µ Blue Dots = Raw GPS

### ğŸ”´ Red Line = Smoothed EKF Estimate

---

## ğŸ“Š Sample Input Format

**File:** `vehicle_sensor_fusion_dataset.csv`

```csv
timestamp,gps_x,gps_y,imu_ax,imu_ay
0,0.0,0.0,0.2,0.1
1,0.8,0.4,0.25,0.12
2,1.6,0.9,0.22,0.15
...
```

---

## â–¶ï¸ How to Run

### Run EKF estimation:

```bash
python main.py
```

### Run EKF with heading/yaw rate:

```bash
python ekf_upgrade.py
```

### Generate EKF animation video:

```bash
python simulation.py
```

---

## ğŸ› ï¸ Requirements

Install dependencies:

```bash
pip install numpy pandas matplotlib opencv-python
```

---

## ğŸš€ Features

* âœ… Simple 2D Kalman Filter for position
* âœ… Extended Kalman Filter (EKF) with velocity & orientation
* âœ… Realtime animation generation with OpenCV
* âœ… Easily extensible for real-time localization and SLAM

---

## ğŸ’¡ Future Ideas

* Integrate with real-time GPS modules
* Add gyroscope/yaw rate as control input
* 3D tracking with altitude (barometer)
* Integration with ROS or Carla simulator

